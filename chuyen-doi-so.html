<!-- ... gi·ªØ nguy√™n ph·∫ßn ƒë·∫ßu ... -->

<!-- N·ªôi dung (·∫©n/hi·ªán) -->
<div id="acc-token" class="hidden border-t">
  <div class="p-5 grid gap-5 sm:grid-cols-2">
    <!-- ·∫¢nh minh ho·∫° -->
    <figure class="bg-orange-50 rounded-lg p-3">
      <!-- thay b·∫±ng ·∫£nh c·ªßa b·∫°n -->
      <img src="images/token-demo.png" alt="Anh minh hoa AccessToken.png"
           class="rounded-md w-full h-auto object-cover">
      <figcaption class="text-sm text-gray-500 mt-2">
        Minh ho·∫° quy tr√¨nh: Scheduler ‚Üí API Zalo OA ‚Üí L∆∞u token
      </figcaption>
    </figure>

    <!-- M√¥ t·∫£ + n√∫t t·∫£i -->
    <div>
      <h3 class="text-lg font-semibold mb-2">M√¥ t·∫£ nhanh</h3>
      <p class="text-gray-700 mb-4">
        ƒêo·∫°n code Node.js d√πng l√†m Netlify Scheduled Function ƒë·ªÉ t·ª± ƒë·ªông l·∫•y token Zalo OA
        theo gi·ªù c·ªë ƒë·ªãnh. Bi·∫øn m√¥i tr∆∞·ªùng: <code>APP_ID</code>, <code>APP_SECRET</code>,
        <code>REFRESH_TOKEN</code>.
      </p>

      <a href="downloads/code-get-token.zip"
         class="inline-block bg-orange-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-orange-600">
        üì• T·∫£i file code (.zip)
      </a>

      <p class="text-xs text-gray-500 mt-3">
        Chia s·∫ª mi·ªÖn ph√≠ ‚Äì vui l√≤ng d·∫´n ngu·ªìn ‚Äúmstrang.edu.vn‚Äù khi chia s·∫ª l·∫°i.
      </p>
    </div>
  </div>

  <!-- Video YouTube h∆∞·ªõng d·∫´n -->
  <div class="px-5 mt-4">
    <iframe width="560" height="315" 
            src="https://www.youtube.com/embed/j_MIdw4jwm0" 
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
    </iframe>
  </div>

  <!-- Kh·ªëi code m·∫´u + n√∫t sao ch√©p -->
  <div class="px-5 pb-6 mt-4">
    <h4 class="font-semibold mb-2">Code m·∫´u (r√∫t g·ªçn)</h4>
    <div class="relative">
      <button onclick="copyCode('code1')" 
              class="absolute top-2 right-2 bg-orange-500 text-white px-2 py-1 rounded text-sm">
        Sao ch√©p
      </button>
      <pre class="codeblock"><code id="code1">// netlify/functions/get-token.js
export async function handler() {
  try {
    const res = await fetch("https://oauth.zaloapp.com/v4/oa/access_token", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({
        app_id: process.env.APP_ID,
        app_secret: process.env.APP_SECRET,
        refresh_token: process.env.REFRESH_TOKEN
      })
    });
    const data = await res.json();
    // TODO: l∆∞u data.access_token v√†o n∆°i b·∫°n mu·ªën (KV/Redis/Sheets)
    return { statusCode: 200, body: JSON.stringify({ ok: true, data }) };
  } catch (e) {
    return { statusCode: 500, body: JSON.stringify({ ok: false, error: e.message }) };
  }
}</code></pre>
    </div>

    <div class="relative mt-4">
      <button onclick="copyCode('code2')" 
              class="absolute top-2 right-2 bg-orange-500 text-white px-2 py-1 rounded text-sm">
        Sao ch√©p
      </button>
      <pre class="codeblock"><code id="code2"># netlify.toml
[functions."get-token"]
  schedule = "0 23,11 * * *"  # 6h s√°ng & 6h t·ªëi VN (UTC+7)</code></pre>
    </div>
  </div>
</div>

<!-- ... gi·ªØ nguy√™n ph·∫ßn c√≤n l·∫°i ... -->

<!-- Script copy code -->
<script>
function copyCode(id) {
  const code = document.getElementById(id).innerText;
  navigator.clipboard.writeText(code).then(() => {
    alert("ƒê√£ sao ch√©p v√†o clipboard!");
  });
}
</script>
